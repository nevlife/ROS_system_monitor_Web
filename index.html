<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0"
        />
        <title>ROS Monitor Dashboard</title>
        <script src="https://cdn.jsdelivr.net/npm/roslib@1/build/roslib.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <link
            rel="stylesheet"
            href="css/styles.css"
        />
    </head>
    <body>
        <div class="container">
            <header class="header">
                <h1>ü§ñ ROS Monitor System</h1>
                <div class="connection-setup">
                    <input
                        type="text"
                        id="ros-url"
                        placeholder="Ïòà: ws://localhost:9090, https://abc123.ngrok.io, 192.168.1.100:9090"
                        value="ws://localhost:9090"
                    />
                    <button
                        id="connect-button"
                        class="btn-primary"
                    >
                        Connect
                    </button>
                    <div class="connection-status">
                        <span
                            class="status-indicator disconnected"
                            id="status-indicator"
                        ></span>
                        <span id="status-text">Ïó∞Í≤∞ ÎåÄÍ∏∞</span>
                    </div>
                </div>
            </header>

            <div class="dashboard">
                <!-- ÏãúÏä§ÌÖú Î¶¨ÏÜåÏä§ ÏÉÅÌÉú -->
                <div class="system-status">
                    <div class="status-card">
                        <h3>üíª CPU Status</h3>
                        <div id="cpu-info">CPU: -% | Temp: -¬∞C | Load: -, -, -</div>
                    </div>
                    <div class="status-card">
                        <h3>üß† Memory Status</h3>
                        <div id="memory-info">Mem: -/- MB (-ÔºÖ)</div>
                    </div>
                    <div class="status-card">
                        <h3>üéÆ GPU Status</h3>
                        <div id="gpu-info">GPU: -% | Mem: -/- MB | Temp: -¬∞C</div>
                    </div>
                </div>

                <!-- Î°úÍ∑∏ Ìå®ÎÑê -->
                <div class="log-panel">
                    <h3>System Logs</h3>
                    <div
                        class="log-container"
                        id="log-container"
                    >
                        <div class="log-entry">[ÏãúÏä§ÌÖú ÏãúÏûë] ROS Monitor Ïõπ Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ Ï¥àÍ∏∞Ìôî...</div>
                    </div>
                </div>

                <!-- Î™®ÎãàÌÑ∞ÎßÅ Ìå®ÎÑêÎì§ (Í∞ÄÎ°ú Î∞∞Ïπò) -->
                <div class="monitoring-panels-horizontal">
                    <!-- ROS ÌÜ†ÌîΩ Î™®ÎãàÌÑ∞ÎßÅ -->
                    <div class="panel">
                        <h3>üì° ROS Topics Monitor</h3>
                        <div class="table-container">
                            <table id="topics-table">
                                <thead>
                                    <tr>
                                        <th>üìÇ Topic Name</th>
                                        <th>üéØ Target Hz</th>
                                        <th>‚ö° Current Hz</th>
                                        <th>üìä Bandwidth</th>
                                        <th>üìà Status</th>
                                    </tr>
                                </thead>
                                <tbody id="topics-tbody">
                                    <tr>
                                        <td
                                            colspan="5"
                                            style="
                                                text-align: center;
                                                color: #95a5a6;
                                                font-style: italic;
                                                padding: 40px;
                                            "
                                        >
                                            ROSÏóê Ïó∞Í≤∞ÌïòÏó¨ ÌÜ†ÌîΩ Ï†ïÎ≥¥Î•º ÌôïÏù∏ÌïòÏÑ∏Ïöî
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- ROS ÎÖ∏Îìú Î™®ÎãàÌÑ∞ÎßÅ -->
                    <div class="panel">
                        <h3>üîó ROS Nodes Monitor</h3>
                        <div class="table-container">
                            <table id="nodes-table">
                                <thead>
                                    <tr>
                                        <th>üè∑Ô∏è Node Name</th>
                                        <th>üíª CPU Usage</th>
                                        <th>üß† RAM Usage</th>
                                        <th>‚ö†Ô∏è Status</th>
                                    </tr>
                                </thead>
                                <tbody id="nodes-tbody">
                                    <tr>
                                        <td
                                            colspan="4"
                                            style="
                                                text-align: center;
                                                color: #95a5a6;
                                                font-style: italic;
                                                padding: 40px;
                                            "
                                        >
                                            ROSÏóê Ïó∞Í≤∞ÌïòÏó¨ ÎÖ∏Îìú Ï†ïÎ≥¥Î•º ÌôïÏù∏ÌïòÏÑ∏Ïöî
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- GPU ÌîÑÎ°úÏÑ∏Ïä§ Î™®ÎãàÌÑ∞ÎßÅ -->
                <div class="panel gpu-panel">
                    <h3>GPU Processes Monitor</h3>
                    <div class="table-container">
                        <table id="gpu-table">
                            <thead>
                                <tr>
                                    <th>üÜî PID</th>
                                    <th>üè∑Ô∏è Type</th>
                                    <th>‚ö° SM (%)</th>
                                    <th>üß† Mem (%)</th>
                                    <th>üìä Enc</th>
                                    <th>üìä Dec</th>
                                    <th>üñºÔ∏è Jpg</th>
                                    <th>üîß Ofa</th>
                                    <th>üíª Command</th>
                                </tr>
                            </thead>
                            <tbody id="gpu-tbody">
                                <tr>
                                    <td
                                        colspan="9"
                                        style="text-align: center; color: #95a5a6; font-style: italic; padding: 40px"
                                    >
                                        GPU ÌîÑÎ°úÏÑ∏Ïä§ Ï†ïÎ≥¥Î•º Î°úÎî© Ï§ë...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Rosbag Î†àÏΩîÎçî -->
                <div class="panel rosbag-panel">
                    <h3>Rosbag Recorder</h3>
                    <div class="rosbag-controls">
                        <div class="recording-status">
                            <div
                                class="status-circle"
                                id="recording-indicator"
                            ></div>
                            <span id="recording-time">00:00:00</span>
                        </div>
                        <button
                            id="record-button"
                            class="btn-primary"
                        >
                            üé¨ Start Record
                        </button>
                        <button
                            id="edit-topics-button"
                            class="btn-secondary"
                        >
                            ‚úèÔ∏è Edit Topics
                        </button>
                    </div>
                </div>
            </div>

            <!-- ÌÜ†ÌîΩ Ìé∏Ïßë Î™®Îã¨ -->
            <div
                id="topic-modal"
                class="modal"
            >
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>üìù Edit Recording Topics</h3>
                        <span
                            class="close"
                            id="close-modal"
                            >&times;</span
                        >
                    </div>
                    <div class="modal-body">
                        <textarea
                            id="topics-textarea"
                            placeholder="ÌÜ†ÌîΩÏùÑ Ìïú Ï§ÑÏóê ÌïòÎÇòÏî© ÏûÖÎ†•ÌïòÏÑ∏Ïöî...&#10;Ïòà:&#10;/cmd_vel&#10;/odom&#10;/scan&#10;/tf"
                        ></textarea>
                    </div>
                    <div class="modal-footer">
                        <button
                            id="save-topics"
                            class="btn-primary"
                        >
                            üíæ Save
                        </button>
                        <button
                            id="cancel-topics"
                            class="btn-secondary"
                        >
                            ‚ùå Cancel
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <script src="js/systemMonitor.js"></script>
        <script src="js/topicMonitor.js"></script>
        <script src="js/nodeMonitor.js"></script>
        <script src="js/gpuMonitor.js"></script>
        <script src="js/logManager.js"></script>
        <script src="js/rosbagRecorder.js"></script>
        <script src="js/main.js"></script>
    </body>
</html>
